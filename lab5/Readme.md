#Лабораторная работа №5.

>Примитивы синхронизации данных. Критические секции.

##Цели и задачи

Познакомиться с принципами работы многопоточного приложения с общими данными в однопроцессорной и многопроцессорной системах. Использование критических секций для синхронизации доступа потоков к общим данных.

##Постановка задачи

На основе лабораторной работы номер 1 разработать программу, которая:

· создает два потока, передает в потоковую функцию ссылку на одну и ту же числовую переменную (WorkingVariable);

· каждый поток осуществляет чтение значения переменной, переданной в качестве параметра в локальную переменную потока value, другой локальной переменной delta присвоить случайное значение, переменную value увеличить на значение delta, присвоить переменной, переданной в качестве параметра в поток (общие данные), значение value. Вывести на экран значения переменной, переданной в качестве параметра в поток, со значением value. Если они не будут равны, вывести сообщение об ошибке. Выполнить программу на одном процессоре, на двух процессорах (через планировщик задач как в лабораторной работе №3).

· объяснить причину появления ошибок при выполнении программы на двух процессорах; модифицировать программу с использованием критических секций, чтобы устранить появляющиеся ошибки при выполнении программы на двух процессорах.

##Требования

1. Программа должна быть реализована в виде консольного приложения и использовать Windows SDK, язык программирования – С++.

2. Работу с потоками реализовать в виде класса. В качестве параметра, передаваемого в потоки, можно использовать данный класс.

3. Общей переменной потоков присвоить значение 1. Значение delta в каждом потоке формировать случайно из диапазона от 1 до 10.

4. Для реализации критической секции использовать функции EnterCriticalSection и LeaveCriticalSection (https://docs.microsoft.com/en-us/windows/win32/sync/using-critical-section-objects).