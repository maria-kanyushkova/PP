#Лабораторная работа №6.

>Примитивы синхронизации данных. Критические секции. События.

##Цели и задачи

Познакомиться с принципами работы многопоточного приложения с общими данными в однопроцессорной и многопроцессорной системах. Использование событий для синхронизации доступа потоков к общим данных.

##Постановка задачи

На основе лабораторной работы номер 4 разработать программу, которая:

- осуществляет логирование времени обработки каждого пикселя;

- механизм логирования должен быть реализован в виде потокобезопасного класса, выполняющего сохранение записей логов в памяти;

- при достижении определенного количества строк лога в памяти должна быть выполнена операция сохранения логов на диск.

##Требования

1. Программа должна быть реализована в виде консольного приложения и использовать Windows SDK, язык программирования – С++.

2. Реализовать механизм логирования в виде класса LogBuffer. Метод логирования данного класса будет вызываться различными потоками. Для хранения логов в памяти реализовать самостоятельно односвязный или двусвязный список.

3. Класс должен быть потокобезопасным, то есть обеспечивать правильную работу при доступе к общим ресурсам (в данном случае, к логам) при работе из разных потоков.

4. При достижении определенного размера буфера данные из него должны сохраняться в файл, а сам буфер очищается. Запись данных в файл осуществляется в отдельном потоке LogSizeMonitoringThread классом LogFileWriter. Поток должен ожидать события накопления буфера и после его получения осуществлять запись (можно использовать ManualResetEvent и AutoResetEvent).